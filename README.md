# unity
一些关于unity的东西
## unity魔方游戏

本游戏难点主要集中在几何处理，以及操作指令的处理。<br>
1. 几何处理</br>
* 对每个块采用`三维数组`保存</br>
* 可以通过把魔方中心位置放置在（0，0，0）。你就可以发现魔方的任何操作都是把`某层`的9块的动作是绕着坐标轴旋转。</br>
* 采用`三维数组`有个好处就是每次魔方的动作都是9个块在运动。也就是说把某个维度设置维常数就能`遍历所有`要`旋转`的块：例如x轴最里面那块`[0,i,j]`.</br>
* 不过还有对`3维数组`进行`旋转变换`，不然就会发生错误.</br>
2. 逻辑处理（`状态机`）
* 最基础的魔方运动指令就2个：`接受按钮`，`对按钮做出响应`</br>
* 在魔方做动作1的时候玩家已经按下动作2的按钮了，可以采用一个`队列`的结构，相当于`生产者``消费者`，这个还要考虑多线程的问题我采用`状态机`来处理</br>
* 把处理输入和魔方动作的函数写在update中这样就涉绝了`多线程`问题线程。在实际测试中响应还是达到要求。</br>
    
  * 控制魔方动作的`状态机`：</br>
      * 状态机分为`4个状态`：</br>
        * 静止状态(stop)：不做任何操作，读取用户按钮写入队列操作的时候唤醒到`读取状态(read)`。
        * 读取数据状态(read):从队列中读取一个`运动数据`然后转到`运动状态（run）`。
        * 运动状态(run):采用每次update就旋转一些，如果旋转位置没到90度就继续运动状态，如果旋转位置到了90度就转换到`设置数组状态(setArray)`
        * 设置数组状态(setArray)：之前提到过在发盛旋转变换的时候三维数组和物体的对应关系也要发生变化，这里进行设置，设置完了之后查看队列是否有数据有数据转到`读取数据状态（read）`态重复读取继续运动，如果没有就回到`静止（stop）`停止运动节约性能。
            
        
